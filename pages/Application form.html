<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Регистрация на участие в конференции</title>
    <link rel="stylesheet" href="../style/style.css">
    <script src="../Script/input validation.js"></script>
    <script src="../library/jquery-3.6.3.min.js"></script>    
</head>
<body class="Conference" >  
    <header>
        <h1>
            Анкета участника
        </h1>
        <nav class="Navigation">            
            <a href="../index.html">Главная</a>            
            <a href="Application form.html">Регистрация на участие в конференции</a>
            <a href="Catalog.html">Картинная галерея</a>
        </nav>
    </header>
    <main>
    <form name ="anketa" onsubmit="return validateForm()" method="post">      
        <div>
            <b>Заполните данные анкеты</b>
        </div>        
          <label for="name">Имя</label>
          <div>          
            <input type="text" id="Name" name="name" placeholder="Введите имя"/><br />
            <div class="error" id="nameErr"></div>                   
          </div>
            <label for="Surname">Фамилия</label>
          <div>
            <input type="text" id="surname" name="surname" placeholder="Введите фамилию"/><br />
            <div class="error" id="surnameErr"></div>
          </div>
            <label for="Second_name">Отчество</label>
          <div>
            <input type="text" id="second_name" name="second_name" placeholder="Введите отчество"/><br />
            <div class="error" id="second_nameErr"></div>
          </div>
            <label for="Birth_date">Дата рождения</label>
          <div>
            <input type ="date" id="Birth_date" name="Birth_date" /><br />
          </div>
            <label for="Phone">Phone</label>
          <div>
            <input type ="text" id="phone" name="phone" placeholder="Формат +71111111111"/><br />
            <div class="error" id="phoneErr"></div>
          </div>
            <label for="Email">Email</label>
          <div> 
            <input type ="text" id="email" name="email" placeholder="Введите Email"/><br />
            <div class="error" id="emailErr"></div>
          </div>          
          <div  class="Choose_subject">          
            <legend>Доклад по предмету</legend>
            <ul>Математика
              <div class="switch-btn" id="sw1"></div>
              <script>
                $('#sw1').click(function(){
                  $(this).toggleClass('switch-on');
                  if ($(this).hasClass('switch-on')) {
                    $(this).trigger('on.switch');
                    $('#sw1').after(function (index) {
                  return $('<input type="text" class="subject_field" id="subject_field1" placeholder="Введите тему выступления">', {
                    
                  });
                });
                  } 
                  else {
                    $(this).trigger('off.switch');
                    $('#subject_field1').remove();
                  }
                })            
                </script>                                         
            </ul>            
            <ul>Физика
              <div class="switch-btn" id="sw2"></div>
              <script>
                $('#sw2').click(function(){
                  $(this).toggleClass('switch-on');
                  if ($(this).hasClass('switch-on')) {
                    $(this).trigger('on.switch');
                    $('#sw2').after(function (index) {
                  return $('<input type="text" class="subject_field" id="subject_field2" placeholder="Введите тему выступления">', {
                    
                  });
                });
                  } 
                  else {
                    $(this).trigger('off.switch');
                    $('#subject_field2').remove();
                  }
                })            
                </script>  
            </ul>
            <ul>Информатика
              <div class="switch-btn" id="sw3"></div>
              <script>
                $('#sw3').click(function(){
                  $(this).toggleClass('switch-on');
                  if ($(this).hasClass('switch-on')) {
                    $(this).trigger('on.switch');
                    $('#sw3').after(function (index) {
                  return $('<input type="text" class="subject_field" id="subject_field3" placeholder="Введите тему выступления">', {                    
                  });                 
                });
                  } 
                  else {
                    $(this).trigger('off.switch');
                    $('#subject_field3').remove();
                  }
                })            
                </script>
                
            </ul>          
          </div> 
          <script>
            function Send(){
                            
                let formData = JSON.stringify($("#anketa").serializeArray());
                let xhr= new XMLHttpRequest();
                xhr.open('POST','../Web API/api/Controllers')
                xhr.setRequestHeader('Content-Type', 'application/json; charset=UTF-8');
                xhr.onreadystatechange = function () {
                    // если запрос принят и сервер ответил, что всё в порядке
                    if (xhr.readyState === 4 && xhr.status === 200) {
                        // выводим то, что ответил нам сервер — так мы убедимся, что данные он получил правильно
                        result.innerHTML = this.responseText;
                    }
                };
                xhr.send(formData);
                        
            }
          </script>      
          <div class="sub">
            <input type="submit" onclick="Send()" id="Submit"/>
            <input type="reset" value="Очистить форму">               
          </div>          
    </form>
</main>  
</body>
</html>